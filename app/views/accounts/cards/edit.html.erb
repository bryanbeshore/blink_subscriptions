<div class="pb-5 border-b border-gray-300 space-y-3 sm:flex sm:items-center sm:justify-between sm:space-x-4 sm:space-y-0">
  <h1 class="text-3xl font-bold leading-tight text-gray-900">
    Update Card
  </h1>
</div>

<div class="mt-5 bg-white shadow sm:rounded-lg">
  <div class="px-4 py-5 sm:p-6">
    <h3 class="text-lg leading-6 font-medium text-gray-900">
      Current payment method
    </h3>
    <div class="mt-5 rounded-md bg-gray-50 sm:flex sm:items-start sm:justify-between">
      <% if current_account.card_last4? %>
        <div class="sm:flex sm:items-start">
          <% if current_account.card_brand == "Visa"%>
            <svg class="h-8 w-auto sm:flex-shrink-0 sm:h-6" fill="none" viewBox="0 0 36 24" role="img" aria-labelledby="svg-visa">
              <title id="svg-visa">VISA</title>
              <rect width="36" height="24" fill="#224DBA" rx="4" />
              <path fill="#fff" fill-rule="evenodd" d="M10.925 15.673H8.874l-1.538-6c-.073-.276-.228-.52-.456-.635A6.575 6.575 0 005 8.403v-.231h3.304c.456 0 .798.347.855.75l.798 4.328 2.05-5.078h1.994l-3.076 7.5zm4.216 0h-1.937L14.8 8.172h1.937l-1.595 7.5zm4.101-5.422c.057-.404.399-.635.798-.635a3.54 3.54 0 011.88.346l.342-1.615A4.808 4.808 0 0020.496 8c-1.88 0-3.248 1.039-3.248 2.481 0 1.097.969 1.673 1.653 2.02.74.346 1.025.577.968.923 0 .519-.57.75-1.139.75a4.795 4.795 0 01-1.994-.462l-.342 1.616a5.48 5.48 0 002.108.404c2.108.057 3.418-.981 3.418-2.539 0-1.962-2.678-2.077-2.678-2.942zm9.457 5.422L27.16 8.172h-1.652a.858.858 0 00-.798.577l-2.848 6.924h1.994l.398-1.096h2.45l.228 1.096h1.766zm-2.905-5.482l.57 2.827h-1.596l1.026-2.827z" clip-rule="evenodd" />
            </svg>
          <% elsif current_account.card_brand == "Amex" %>
            <img src="https://raw.githubusercontent.com/aaronfagan/svg-credit-card-payment-icons/master/flat-rounded/amex.svg" alt="American Express" style="height: 24px;">
          <% elsif current_account.card_brand == "Mastercard"%>
            <img src="https://raw.githubusercontent.com/aaronfagan/svg-credit-card-payment-icons/master/flat-rounded/mastercard.svg" alt="MasterCard" style="height: 24px;">
          <% elsif current_account.card_brand == "Discover"%>
            <img src="https://raw.githubusercontent.com/aaronfagan/svg-credit-card-payment-icons/master/flat-rounded/discover.svg" alt="Discover" style="height: 24px;">
          <% end %>
          <div class="mt-3 sm:mt-0 sm:ml-4">
            <div class="text-sm leading-5 font-medium text-gray-900">
              <%= current_account.card_brand %> ending in <%= current_account.card_last4 %>
            </div>
            <div class="mt-1 text-sm leading-5 text-gray-600 sm:flex sm:items-center">
              <div>
                Expires <%= current_account.card_exp_month %> / <%= current_account.card_exp_year %>
              </div>
              <span class="hidden sm:mx-2 sm:inline" aria-hidden="true">
                &middot;
              </span>
              <div class="mt-1 sm:mt-0">
                Last updated: <%= current_account.charges.first.updated_at.strftime("%B %d, %Y")   %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <div class="mt-6 sm:mt-5">
    <%= form_with url: card_path, method: :patch, local: true, id: "payment-form", data: { setup_intent: @setup_intent.client_secret } do |form| %>
      <div class="sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5">
        <label for="card-element" class="block text-sm font-medium leading-5 text-gray-700 sm:mt-px sm:pt-2">
          Update with a credit or debit card
        </label>
        
      </div>    
      
        <div class="form-group">
          
          <div id="card-element" class="form-control form-input relative block w-full rounded-md bg-transparent focus:z-10 transition ease-in-out duration-150 sm:text-sm sm:leading-5" placeholder="Card number">
          </div>

          <div id="card-errors" role="alert"></div>
        </div>

        <div>
          <div class="flex justify-between">
            <label for="name" class="block text-sm font-medium leading-5 text-gray-700">Name on card</label>
          </div>
          <div class="mt-1 relative rounded-md shadow-sm">
            <%= form.text_field :name_on_card, id: "name_on_card", placeholder: "Full name", class: "form-control form-input block w-full sm:text-sm sm:leading-5" %>
            
          </div>
        </div>
        <div class="mt-3 form-group">
          <%= form.submit "Update Card", class: "inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition ease-in-out duration-150" %>
        </div>
      <% end %>
    </div>

  </div>
</div>

